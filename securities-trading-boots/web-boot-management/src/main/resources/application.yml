# Spring 基础配置
spring:
  # 1.1 应用配置
  application:
    name: web-boot-management
  # 1.2 视图模版配置（Thymeleaf）
  thymeleaf:
    prefix: classpath:/templates/  # 前缀（必须是templates，不能少s）
    suffix: .html                  # 后缀
    mode: HTML                     # 模板模式
    encoding: UTF-8
    cache: false                   # 开发环境关闭缓存（避免修改模板不生效）
  # 1.3 静态资源配置
  web:
    resources:
      static-locations: classpath:/static/management/,classpath:/META-INF/resources/,classpath:/META-INF/resources/webjars/
  mvc:
    favicon:
      enabled: false  # 关闭默认favicon处理
  # 1.4 数据源配置
  datasource:
    url: jdbc:mysql://localhost:3306/ijupiter_schema?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true
    username: root              # 数据库账号
    password: xujin@110418      # 数据库密码
    driver-class-name: com.mysql.cj.jdbc.Driver
    # 连接池配置（生产环境必配）
    hikari:
      maximum-pool-size: 10  # 最大连接数
      minimum-idle: 5        # 最小空闲连接
      idle-timeout: 300000   # 连接空闲超时
      connection-timeout: 20000 # 连接超时
  # 1.5 JPA/Hibernate 配置
  jpa:
    # 数据库方言（MySQL 8.x 用这个，PostgreSQL 替换为 org.hibernate.dialect.PostgreSQLDialect）
    database-platform: org.hibernate.dialect.MySQL8Dialect
    # 显式指定实体扫描（兜底，与启动类 @EntityScan 配合）
    packages-to-scan:
      - net.ijupiter.trading.core
      - org.axonframework.eventhandling.tokenstore.jpa
      - org.axonframework.eventsourcing.eventstore.jpa
    hibernate:
      ddl-auto: none  # 开发环境：update（自动创建/更新表）；生产环境：none（手动建表，避免误删）
    show-sql: true     # 显示 SQL（开发环境开启，生产关闭）
    properties:
      hibernate:
        #id:
        #  db_structure_naming_strategy: IDENTITY #sequence  #legacy-hilo
        format_sql: true                  # 格式化 SQL 日志
        use_sql_comments: true            # 显示 SQL 注释
        globally_quoted_identifiers: false # 关闭全局引用标识符，避免生成带双引号的标识符
        physical_naming_strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl # 使用标准物理命名策略
    open-in-view: false
  # 1.6 允许循环依赖
  main:
    allow-circular-references: true

# 服务器配置
server:
  port: 9000  # 修改端口避免冲突
  # 错误页面配置
  error:
    whitelabel:
      enabled: false
    path: /error
  # 自定义错误页面映射
  servlet:
    error:
      include-message: always
      include-binding-errors: always

# 日志配置（便于调试）
logging:
  level:
    org.springframework.security: INFO
    net.ijupiter.trading.web.admin: INFO
    net.ijupiter.trading: INFO
    org.springframework.beans.factory: INFO

# 系统自有配置项
system:
  web:
    title: iJupiter Trading System # 系统页标签
    name: iJupiter证券交易系统       # 系统名称
    version: V1.0.0                # 系统版本